// Generated by CoffeeScript 1.3.3
(function() {

  define([], function() {
    return function(method, model, options) {
      var data, url;
      if (typeof model.url === 'function') {
        url = model.url();
      } else {
        url = model.url;
      }
      switch (method) {
        case 'read':
          if ((typeof localStorage !== "undefined" && localStorage !== null ? localStorage[url] : void 0) != null) {
            data = JSON.parse(localStorage[url]);
            model.reset(data);
          }
          return model.on('reset', function() {
            return localStorage[url] = JSON.stringify(model.toJSON());
          });
      }
    };
  });

}).call(this);
